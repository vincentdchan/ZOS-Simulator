{"version":3,"sources":["webpack:///webpack/bootstrap c075672d498a416de634","webpack:///./src/Windows/Window.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./src/index.js","webpack:///./src/Windows/WindowsManager.js","webpack:///./src/Emitter.js","webpack:///./src/stylesheets/main.scss?1325","webpack:///./src/stylesheets/main.scss","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/htmlparser/lib/htmlparser.js","webpack:///./src/TextEditor/TextEditor.js","webpack:///./src/stylesheets/textEditor.scss?93ee","webpack:///./src/stylesheets/textEditor.scss","webpack:///./src/Files/FileWindow.js","webpack:///./src/Files/FileItem.js","webpack:///./src/stylesheets/file.scss?ab42","webpack:///./src/stylesheets/file.scss","webpack:///./src/ProgramExecutor/ProgramExecutor.js","webpack:///./src/stylesheets/programExecutor.scss?ee4f","webpack:///./src/stylesheets/programExecutor.scss","webpack:///./src/VirtualLine.js","webpack:///./src/TaskManager/TaskManager.js","webpack:///./src/stylesheets/taskManager.scss?b841","webpack:///./src/stylesheets/taskManager.scss","webpack:///./src/Core/VM.js","webpack:///./src/Core/Program.js","webpack:///./src/Core/Compiler.js"],"names":["htmlparser","Component","value","_dom","_slot","$refs","dom","appendChild","onMounted","template","handle","DefaultHandler","error","console","parser","Parser","parseComplete","doms","vListToDomList","vlist","map","dom_node","type","document","createTextNode","data","name","createElement","attribs","slot_name","setAttribute","attr_key","attr_value","forEach","log","slot_dom","parent","parentNode","replaceChild","TitleBar","window_template","Window","wm","RenderTemplate","x","y","width","height","title","titleBarPressed","_focused","zIndex","zIndexCounter","windowsID","GetNewId","addEventListener","id","focus","unfocus","window","event","onMouseMove","titlebar","e","onTitleBarMouseUp","onTitleBarMouseDown","onMouseDown","classList","add","remove","FocusWindow","clientX","lastOffset","clientY","_title","innerText","_x","style","left","_y","top","_width","_height","_zIndex","require","VirtualLine","measure_font","canvas","getElementById","innerWidth","innerHeight","ctx","getContext","fillStyle","fillRect","font","text","measureText","font_width","font_height","virtuallines","Initialize","virtuallines_length","Math","ceil","i","vl","push","lastTime","Date","accuTime","tick","now","deltaTime","getTime","v","paint","requestAnimationFrame","vm","my_window","pe","fw","taskManager","world","Render","WindowsManager","_id_counter","_focused_id","emit","Emitter","_map","callback","args","Array","prototype","slice","call","arguments","apply","undefined","TextEditor","Slot","FileWindow","fi1","fileType","filename","fi2","fileContainer","setState","path","target","FileItem","_fileType","iconimg","_filename","source_code","initBtn","btn","img","querySelector","ProgramExecutor","frame","programFrame","runBtn","onRunClicked","pauseBtn","onPauseClicked","stopBtn","onStopClicked","stepForwardBtn","onStepForwardClicked","resources","ShuffleString","str","len","result","str_len","length","rd","round","random","total_level","black_level","x_offset","_x_offset","_font_width","_font_height","_content","_tick","_offset_step","text_length","absolute_level","color_level","green_level","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","toString","fillText","test_level","task_manager_template","process_page_template","cpu_page_template","memory_page_template","info_page_template","TaskManager","app","Vue","el","nav_number","message","methods","choose","number","OP_STOP","OP_ADD","OP_SUB","OP_MUL","OP_DIV","OP_LOAD","OP_STORE","OP_CMP","OP_JMP","OP_JMP_GT","OP_JMP_LT","OP_JMP_GTEQ","OP_JMP_LTEQ","OP_JMP_EQ","OP_NOTSTRICT_EQL","OP_SLICE","OP_TOINT","OP_TOSTR","VM","_context_queue","_current_context","program","new_pid","Context","pid","content","Error","parseInt","current_pc","pc","inst","instructions","op_code","op1","op2","op3","GetValue","op","registers","constants","targetReisterNumber","val1","val2","newValue","Kill","ExtractRegisterNumber","flags","zero","sign","val","newInst","a1","a2","a3","_registers","_flags","_pc","_pid","_program","Program","_constants","_instructions","constant","Compile","regex_line","regex_comment","lines","split","line","exec"],"mappings":"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CA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC1VA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAZA;;;;;eAKuB,mBAAAmF,CAAQ,EAAR,C;IAAhBC,W,YAAAA,W;;AASP,IAAMC,eAAe,GAArB;;AAEA/D,SAASgC,gBAAT,CAA0B,kBAA1B,EAA8C,UAASK,KAAT,EAAgB;AAC1D,QAAM2B,SAAShE,SAASiE,cAAT,CAAwB,aAAxB,CAAf;AACAD,WAAOzC,KAAP,GAAea,OAAO8B,UAAtB;AACAF,WAAOxC,MAAP,GAAgBY,OAAO+B,WAAvB;;AAEA,QAAMC,MAAMJ,OAAOK,UAAP,CAAkB,IAAlB,CAAZ;;AAEAD,QAAIE,SAAJ,GAAgB,OAAhB;AACAF,QAAIG,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBP,OAAOzC,KAA1B,EAAiCyC,OAAOxC,MAAxC;AACA4C,QAAIE,SAAJ,GAAgB,OAAhB;AACAF,QAAII,IAAJ,GAAW,sBAAX;;AAEA,QAAMC,OAAOL,IAAIM,WAAJ,CAAgBX,YAAhB,CAAb;AACA,QAAMY,aAAaF,KAAKlD,KAAxB;AACA,QAAMqD,cAAcH,KAAKjD,MAAzB;;AAEA,QAAIqD,eAAe,EAAnB;;AAEA,aAASC,UAAT,GAAsB;AAClBD,uBAAe,EAAf;;AAEA,YAAIE,sBAAsBC,KAAKC,IAAL,CAAUjB,OAAOzC,KAAP,GAAeoD,UAAzB,CAA1B;;AAEA,aAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIH,mBAApB,EAAyCG,GAAzC,EAA8C;AAC1C,gBAAIC,KAAK,IAAIrB,WAAJ,CAAgBoB,KAAKP,aAAa,CAAlB,CAAhB,EAAsCA,UAAtC,EAAkDX,OAAOxC,MAAzD,EAAiEmD,UAAjE,EAA6E,EAA7E,CAAT;AACAE,yBAAaO,IAAb,CAAkBD,EAAlB;AACH;AACJ;;AAED/C,WAAOJ,gBAAP,CAAwB,QAAxB,EAAkC,UAACQ,CAAD,EAAO;AACrCwB,eAAOzC,KAAP,GAAea,OAAO8B,UAAtB;AACAF,eAAOxC,MAAP,GAAgBY,OAAO+B,WAAvB;AACAW;AACH,KAJD;;AAMAA;;AAEA,QAAIO,WAAW,IAAIC,IAAJ,EAAf;AACA,QAAIC,WAAW,CAAf;;AAEA,aAASC,IAAT,GAAgB;AACZ,YAAMC,MAAM,IAAIH,IAAJ,EAAZ;AACA,YAAMI,YAAY,CAACD,IAAIE,OAAJ,KAAgBN,SAASM,OAAT,EAAjB,IAAuC,IAAzD;;AAEAJ,oBAAYG,SAAZ;;AAEA,YAAIH,WAAW,IAAf,EAAqB;AACjBnB,gBAAIE,SAAJ,GAAgB,OAAhB;AACAF,gBAAIG,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBP,OAAOzC,KAA1B,EAAiCyC,OAAOxC,MAAxC;AACAqD,yBAAanE,OAAb,CAAqB,UAACkF,CAAD,EAAO;AACxBA,kBAAEC,KAAF,CAAQzB,GAAR,EAAasB,SAAb;AACH,aAFD;AAGAH,uBAAW,CAAX;AACH;;AAEDF,mBAAWI,GAAX;;AAEAK,8BAAsBN,IAAtB;AACH;;AAEDA;;AAEA,QAAIrE,KAAK,oCAAT;AACA,QAAI4E,KAAK,YAAT;;AAEA,QAAIC,YAAY,2BAAe7E,EAAf,CAAhB;AACA,QAAI8E,KAAK,qCAAoB9E,EAApB,CAAT;AACA,QAAI+E,KAAK,2BAAe/E,EAAf,CAAT;AACA,QAAIgF,cAAc,6BAAgBhF,EAAhB,CAAlB;;AAEA,QAAIiF,QAAQpG,SAASiE,cAAT,CAAwB,OAAxB,CAAZ;AACA+B,cAAUK,MAAV,CAAiBD,KAAjB;AACAH,OAAGI,MAAH,CAAUD,KAAV;AACAF,OAAGG,MAAH,CAAUD,KAAV;AACAD,gBAAYE,MAAZ,CAAmBD,KAAnB;AACH,CA3ED,E;;;;;;;;;;;;;;;;ACXA;;;;;;+eALA;;;;;IAOaE,c,WAAAA,c;;;AAET,8BAAc;AAAA;;AAAA;;AAGV,cAAKC,WAAL,GAAmB,CAAnB;AACA,cAAKC,WAAL,GAAmB,CAAnB;;AAEA,YAAI5E,SAAS,CAAb;AACA,cAAKC,aAAL,GAAqB,YAAY;AAC7B,mBAAOD,QAAP;AACH,SAFD;AAPU;AAUb;;;;2CAEkB;AACf,mBAAO,KAAKC,aAAZ;AACH;;;oCAEWI,E,EAAI;AACZ,iBAAKuE,WAAL,GAAmBvE,EAAnB;AACA,iBAAKwE,IAAL,CAAU,sBAAV,EAAkCxE,EAAlC;AACH;;;uCAEc;AACX,mBAAO,KAAKuE,WAAZ;AACH;;;mCAEU;AACP,mBAAO,KAAKD,WAAL,EAAP;AACH;;;;;;;;;;;;;;;;;;;;;ACpCL;;;;;IAKaG,O,WAAAA,O;AAET,uBAAc;AAAA;;AACV,aAAKC,IAAL,GAAY,EAAZ;AACH;;;;yCAEgBxG,I,EAAMyG,Q,EAAU;AAC7B,gBAAIzG,QAAQ,KAAKwG,IAAjB,EAAuB;AACnB,qBAAKA,IAAL,CAAUxG,IAAV,EAAgBiF,IAAhB,CAAqBwB,QAArB;AACH,aAFD,MAEO;AACH,qBAAKD,IAAL,CAAUxG,IAAV,IAAkB,CAACyG,QAAD,CAAlB;AACH;AACJ;;;+BAEM;AACH,gBAAIC,OAAOC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;AACA,gBAAI/G,OAAO0G,KAAK,CAAL,CAAX;AACAA,mBAAOA,KAAKG,KAAL,CAAW,CAAX,CAAP;AACA,gBAAI7G,QAAQ,KAAKwG,IAAjB,EAAuB;AACnB,qBAAKA,IAAL,CAAUxG,IAAV,EAAgBO,OAAhB,CAAwB;AAAA,2BAAKkF,EAAEuB,KAAF,CAAQC,SAAR,EAAmBP,IAAnB,CAAL;AAAA,iBAAxB;AACH;AACJ;;;;;;;;;;AC1BL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;ACzBA;AACA;;;AAGA;AACA,wCAAyC,gCAAgC,8BAA8B,6BAA6B,2BAA2B,0BAA0B,sBAAsB,EAAE,kBAAkB,oBAAoB,sBAAsB,2BAA2B,4BAA4B,8BAA8B,0BAA0B,EAAE,cAAc,+CAA+C,EAAE,OAAO,2BAA2B,EAAE,YAAY,iBAAiB,EAAE,YAAY,kBAAkB,EAAE,YAAY,eAAe,EAAE,YAAY,kBAAkB,EAAE,YAAY,kBAAkB,EAAE,YAAY,eAAe,EAAE,YAAY,kBAAkB,EAAE,YAAY,kBAAkB,EAAE,YAAY,eAAe,EAAE,aAAa,kBAAkB,EAAE,aAAa,kBAAkB,EAAE,aAAa,gBAAgB,EAAE,uBAAuB,gBAAgB,EAAE,iBAAiB,kBAAkB,gBAAgB,mBAAmB,EAAE,qBAAqB,kBAAkB,0BAA0B,iCAAiC,EAAE,aAAa,oBAAoB,4BAA4B,wBAAwB,sBAAsB,0BAA0B,EAAE,uBAAuB,kBAAkB,kCAAkC,mBAAmB,mBAAmB,EAAE,+BAA+B,wBAAwB,qBAAqB,oBAAoB,wBAAwB,EAAE,2BAA2B,0BAA0B,EAAE,oBAAoB,yBAAyB,iBAAiB,sBAAsB,wBAAwB,EAAE,0BAA0B,8BAA8B,uBAAuB,EAAE;;AAEvpD;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA,wCAAwC;AACxC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC,wCAAwC;AACxC,8BAA8B;AAC9B,8CAA8C;;AAE9C;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC,kCAAkC;AAClC,iCAAiC;AACjC,gCAAgC;AAChC,oCAAoC;AACpC,uCAAuC;AACvC,+BAA+B;AAC/B,4BAA4B;AAC5B,mCAAmC;AACnC,iDAAiD;AACjD,mCAAmC;AACnC,iDAAiD;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD,mEAAmE;;AAEnE;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+BAA+B;AAC/B,0EAA0E;AAC1E;AACA;AACA,WAAW;AACX,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,SAAS,OAAO;AAChB;AACA;AACA,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,kEAAkE;AAC3G;AACA;;AAEA;AACA,cAAc;AACd;;AAEA,8DAA8D,2CAA2C,EAAE;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA;AACA;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA,KAAK,aAAa;AAClB;AACA;AACA;AACA;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA;AACA,MAAM,aAAa;AACnB;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,sCAAsC;AACtC;AACA,yCAAyC;AACzC;AACA,+BAA+B;AAC/B;AACA,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;AACA;AACA;AACA;AACA;AACA;AACA,E;AACA;AACA;AACA,E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;AAC1C,2CAA2C;AAC3C,wCAAwC;AACxC,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,wCAAwC;AACxC;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,2BAA2B,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC,SAAS;AAC/C;AACA;;AAEA;AACA,gCAAgC,iBAAiB;AACjD;;AAEA;AACA,gCAAgC,iBAAiB;AACjD;AACA;;AAEA;AACA;AACA;AACA;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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c075672d498a416de634","/************************ \n * Author: DZ Chan \n * Date:   2017-08-12 \n ************************/\n\nimport style from \"../stylesheets/main.scss\"\nimport * as htmlparser from \"htmlparser\"\n\nexport class Component {\n\n    set dom(value) {\n        this._dom = value;\n    }\n\n    get dom() {\n        return this._dom;\n    }\n\n    constructor() {\n        this._slot = {};\n        this.$refs = {};\n    }\n\n    onMounted() {\n\n    }\n\n    Render(dom) {\n        dom.appendChild(this._dom);\n        this.onMounted();\n    }\n\n    RenderTemplate(template) {\n        let handle = new htmlparser.DefaultHandler((error, dom) => {\n            if (error) {\n                console.error(error);\n            }\n        })\n\n        let parser = new htmlparser.Parser(handle);\n        parser.parseComplete(template);\n        // console.log(JSON.stringify(handle.dom, null, 2));\n        let doms = this.vListToDomList(handle.dom);\n        return doms[0];\n    }\n\n    vListToDomList(vlist) {\n        return vlist.map((dom_node) => {\n            switch(dom_node.type) {\n                case \"text\":\n                    return document.createTextNode(dom_node.data);\n                case \"tag\":\n                    let dom;\n                    if (dom_node.name == \"slot\") {\n                        dom = document.createElement(\"div\");\n                        if (\"attribs\" in dom_node && \"name\" in dom_node.attribs) {\n                            let slot_name = dom_node.attribs.name;\n                            this._slot[slot_name] = dom;\n                            dom.setAttribute('data-slot-name', slot_name);\n                        } else {\n                            this._slot['default'] = dom;\n                            dom.setAttribute('data-slot-name', 'default');\n                        }\n                    } else {\n                        dom = document.createElement(dom_node.name);\n                        for (let attr_key in dom_node.attribs) {\n                            if (attr_key == 'ref') {\n                                let attr_value = dom_node.attribs[attr_key];\n                                this.$refs[attr_value] = dom;\n                            } else {\n                                let attr_value = dom_node.attribs[attr_key];\n                                dom.setAttribute(attr_key, attr_value);\n                            }\n                        }\n                        if ('children' in dom_node) {\n                            this.vListToDomList(dom_node['children']).forEach((value) => {\n                                dom.appendChild(value);\n                            })\n                        }\n                    }\n                    return dom;\n                case \"comment\":\n                    break;\n                case \"script\":\n                    break;\n                default:\n                    console.log(dom_node);\n            }\n        })\n    }\n\n    Slot(name, value) {\n        let slot_dom = this._slot[name];\n        let parent = slot_dom.parentNode;\n        parent.replaceChild(value, slot_dom);\n        this._slot[name] = value;\n    }\n\n    // unbind the callback from higher dom\n    Dispose() {\n\n    }\n\n}\n\nclass TitleBar extends Component {\n\n    Render() {\n    }\n\n}\n\nconst window_template = `<div class=\"window\" ref=\"frame\">\n    <div class=\"titleBar unselectable\" ref=\"titlebar\">\n        <div class=\"right\">\n            <i class=\"fa fa-window-close\" aria-hidden=\"true\"></i>\n        </div>\n        <p class=\"name\" ref=\"title_content\"></p>\n    </div>\n    <div>\n        <slot name=\"default\" />\n    </div>\n</div>`\n\nexport class Window extends Component {\n\n    constructor(wm) {\n        super();\n        this._dom = this.RenderTemplate(window_template);\n\n        this.x = 16;\n        this.y = 16;\n        this.width = 400;\n        this.height = 300;\n        this.title = \"Window\";\n        this.titleBarPressed = false;\n        this._focused = false;\n        this.wm = wm;\n        this.zIndex = this.wm.zIndexCounter();\n\n        this.windowsID = this.wm.GetNewId();\n        this.wm.addEventListener(\"focusedWindowChanged\", (id) => {\n            if (id === this.windowsID) {\n                this.focus();\n            } else {\n                this.unfocus();\n            }\n        });\n        window.addEventListener(\"mousemove\", (event) => this.onMouseMove(event));\n\n        this.$refs.titlebar.addEventListener('mouseup', (e) => this.onTitleBarMouseUp(e));\n        this.$refs.titlebar.addEventListener('mousedown', (e) => this.onTitleBarMouseDown(e));\n        this._dom.addEventListener('mousedown', (e) => this.onMouseDown(e));\n    }\n\n    focus() {\n        if (!this._focused) {\n            this._focused = true;\n            this.zIndex = this.wm.zIndexCounter(); \n            this._dom.classList.add('glowing-border');\n        }\n    }\n\n    unfocus() {\n        this._focused = false;\n        this._dom.classList.remove('glowing-border');\n    }\n\n    onMouseDown(event) {\n        this.wm.FocusWindow(this.windowsID);\n    }\n\n    onMouseMove(event) {\n        if (this.titleBarPressed) {\n            this.x = event.clientX - this.lastOffset.x,\n            this.y = event.clientY - this.lastOffset.y,\n            this.lastOffset = {\n                x: event.clientX - this.x,\n                y: event.clientY - this.y,\n            };\n        }\n    }\n\n    onTitleBarMouseDown(event) {\n        this.titleBarPressed = true;\n        this.lastOffset = {\n            x: event.clientX - this.x,\n            y: event.clientY - this.y,\n        };\n\n        this.zIndex = this.wm.zIndexCounter();\n    }\n\n    onTitleBarMouseUp(event) {\n        this.titleBarPressed = false;\n    }\n\n    get title() {\n        return this._title;\n    }\n\n    set title(value) {\n        if (this._title != value) {\n            this.$refs['title_content'].innerText = value;\n            this._title = value;\n        }\n    }\n\n    get x() {\n        return this._x;\n    }\n\n    set x(value) {\n        if (this._x !== value) {\n            this._x = value;\n            this._dom.style.left = value + 'px';\n        }\n    }\n\n    get y() {\n        return this._y;\n    }\n\n    set y(value) {\n        if (this._y !== value) {\n            this._y = value;\n            this._dom.style.top = value + 'px';\n        }\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    set width(value) {\n        if (this._width !== value) {\n            this._width = value;\n            this._dom.style.width = value + 'px' ;\n        }\n    }\n\n    get height() {\n        return this._height;\n    }\n\n    set height(value) {\n        if (this._height !== value) {\n            this._height = value;\n            this._dom.style.height = value + 'px';\n        }\n    }\n\n    get zIndex() {\n        return this._zIndex;\n    }\n\n    set zIndex(value) {\n        if (this._zIndex !== value) {\n            this._zIndex = value;\n            this._dom.style.zIndex = value;\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Windows/Window.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 1\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 2\n// module chunks = 0","/************************ \n * Author: DZ Chan \n * Date:   2017-08-12 \n ************************/\n\nconst {VirtualLine}  = require(\"./VirtualLine.js\")\nimport {WindowsManager} from \"./Windows/WindowsManager.js\"\nimport {Window, Component} from \"./Windows/Window\"\nimport {TextEditor} from \"./TextEditor/TextEditor\"\nimport {FileWindow} from \"./Files/FileWindow\"\nimport {ProgramExecutor} from \"./ProgramExecutor/ProgramExecutor\"\nimport {TaskManager} from \"./TaskManager/TaskManager\"\nimport {VM} from \"./Core/VM\"\n\nconst measure_font = \"\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) { \n    const canvas = document.getElementById(\"main-canvas\");\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.fillStyle = \"black\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = \"green\";\n    ctx.font = \"12px Microsoft YaHei\";\n\n    const text = ctx.measureText(measure_font);\n    const font_width = text.width;\n    const font_height = text.height;\n\n    let virtuallines = [];\n\n    function Initialize() {\n        virtuallines = [];\n\n        let virtuallines_length = Math.ceil(canvas.width / font_width);\n\n        for (let i = 0; i < virtuallines_length; i++) {\n            let vl = new VirtualLine(i * (font_width + 2), font_width, canvas.height, font_width, 20);\n            virtuallines.push(vl);\n        }\n    }\n\n    window.addEventListener(\"resize\", (e) => {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n        Initialize();\n    })\n\n    Initialize();\n\n    let lastTime = new Date();\n    let accuTime = 0;\n\n    function tick() {\n        const now = new Date();\n        const deltaTime = (now.getTime() - lastTime.getTime()) / 1000;\n\n        accuTime += deltaTime;\n\n        if (accuTime > 0.08) {\n            ctx.fillStyle = \"black\";\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            virtuallines.forEach((v) => {\n                v.paint(ctx, deltaTime);\n            })\n            accuTime = 0;\n        }\n\n        lastTime = now;\n\n        requestAnimationFrame(tick);\n    };\n\n    tick();\n\n    let wm = new WindowsManager();\n    let vm = new VM();\n\n    let my_window = new TextEditor(wm);\n    let pe = new ProgramExecutor(wm);\n    let fw = new FileWindow(wm);\n    let taskManager = new TaskManager(wm);\n\n    let world = document.getElementById('world');\n    my_window.Render(world);\n    pe.Render(world);\n    fw.Render(world);\n    taskManager.Render(world);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/************************ \n * Author: DZ Chan \n * Date:   2017-08-12 \n ************************/\n\nimport {Emitter} from \"../Emitter\"\n\nexport class WindowsManager extends Emitter {\n\n    constructor() {\n        super();\n\n        this._id_counter = 0;\n        this._focused_id = 0;\n\n        let zIndex = 0;\n        this.zIndexCounter = function () {\n            return zIndex++;\n        };\n    }\n\n    GetZIndexCounter() {\n        return this.zIndexCounter;\n    }\n\n    FocusWindow(id) {\n        this._focused_id = id;\n        this.emit(\"focusedWindowChanged\", id);\n    }\n\n    GetFocusedId() {\n        return this._focused_id;\n    }\n\n    GetNewId() {\n        return this._id_counter++;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Windows/WindowsManager.js","/************************ \n * Author: DZ Chan \n * Date:   2017-08-12 \n ************************/\n\nexport class Emitter {\n\n    constructor() {\n        this._map = {}\n    }\n\n    addEventListener(name, callback) {\n        if (name in this._map) {\n            this._map[name].push(callback);\n        } else {\n            this._map[name] = [callback];\n        }\n    }\n\n    emit() {\n        let args = Array.prototype.slice.call(arguments);\n        let name = args[0];\n        args = args.slice(1);\n        if (name in this._map) {\n            this._map[name].forEach(v => v.apply(undefined, args))\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Emitter.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./main.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./main.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./main.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/stylesheets/main.scss\n// module id = 7\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".unselectable {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -khtml-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\n.undraggable {\\n  user-drag: none;\\n  user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-drag: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none; }\\n\\n.clicked {\\n  transform: translateX(2px) translateY(2px); }\\n\\n* {\\n  box-sizing: border-box; }\\n\\n.col-1 {\\n  width: 8.33%; }\\n\\n.col-2 {\\n  width: 16.66%; }\\n\\n.col-3 {\\n  width: 25%; }\\n\\n.col-4 {\\n  width: 33.33%; }\\n\\n.col-5 {\\n  width: 41.66%; }\\n\\n.col-6 {\\n  width: 50%; }\\n\\n.col-7 {\\n  width: 58.33%; }\\n\\n.col-8 {\\n  width: 66.66%; }\\n\\n.col-9 {\\n  width: 75%; }\\n\\n.col-10 {\\n  width: 83.33%; }\\n\\n.col-11 {\\n  width: 91.66%; }\\n\\n.col-12 {\\n  width: 100%; }\\n\\n[class*=\\\"col-\\\"] {\\n  float: left; }\\n\\n.row::after {\\n  content: \\\"\\\";\\n  clear: both;\\n  display: table; }\\n\\n.glowing-border {\\n  outline: none;\\n  border-color: #9ecaed;\\n  box-shadow: 0 0 20px #49afff; }\\n\\n.window {\\n  position: fixed;\\n  background-color: white;\\n  border-style: solid;\\n  border-width: 1px;\\n  border-color: #9ecaed; }\\n  .window .titleBar {\\n    width: 100%;\\n    background-color: lightblue;\\n    height: 18px;\\n    padding: 1px; }\\n    .window .titleBar .name {\\n      font-size: 14px;\\n      color: black;\\n      margin: 0px;\\n      cursor: default; }\\n    .window .titleBar p {\\n      line-height: 16px; }\\n  .window .right {\\n    position: absolute;\\n    right: 0px;\\n    font-size: 14px;\\n    line-height: 16px; }\\n  .window .right:hover {\\n    background-color: white;\\n    color: lightblue; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/stylesheets/main.scss\n// module id = 8\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 9\n// module chunks = 0","/***********************************************\nCopyright 2010, 2011, Chris Winberry <chris@winberry.net>. All rights reserved.\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to\ndeal in the Software without restriction, including without limitation the\nrights to use, copy, modify, merge, publish, distribute, sublicense, and/or\nsell copies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE.\n***********************************************/\n/* v1.7.6 */\n\n(function () {\n\nfunction runningInNode () {\n\treturn(\n\t\t(typeof require) == \"function\"\n\t\t&&\n\t\t(typeof exports) == \"object\"\n\t\t&&\n\t\t(typeof module) == \"object\"\n\t\t&&\n\t\t(typeof __filename) == \"string\"\n\t\t&&\n\t\t(typeof __dirname) == \"string\"\n\t\t);\n}\n\nif (!runningInNode()) {\n\tif (!this.Tautologistics)\n\t\tthis.Tautologistics = {};\n\telse if (this.Tautologistics.NodeHtmlParser)\n\t\treturn; //NodeHtmlParser already defined!\n\tthis.Tautologistics.NodeHtmlParser = {};\n\texports = this.Tautologistics.NodeHtmlParser;\n}\n\n//Types of elements found in the DOM\nvar ElementType = {\n\t  Text: \"text\" //Plain text\n\t, Directive: \"directive\" //Special tag <!...>\n\t, Comment: \"comment\" //Special tag <!--...-->\n\t, Script: \"script\" //Special tag <script>...</script>\n\t, Style: \"style\" //Special tag <style>...</style>\n\t, Tag: \"tag\" //Any tag that isn't special\n}\n\nfunction Parser (handler, options) {\n\tthis._options = options ? options : { };\n\tif (this._options.includeLocation == undefined) {\n\t\tthis._options.includeLocation = false; //Do not track element position in document by default\n\t}\n\n\tthis.validateHandler(handler);\n\tthis._handler = handler;\n\tthis.reset();\n}\n\n\t//**\"Static\"**//\n\t//Regular expressions used for cleaning up and parsing (stateless)\n\tParser._reTrim = /(^\\s+|\\s+$)/g; //Trim leading/trailing whitespace\n\tParser._reTrimComment = /(^\\!--|--$)/g; //Remove comment tag markup from comment contents\n\tParser._reWhitespace = /\\s/g; //Used to find any whitespace to split on\n\tParser._reTagName = /^\\s*(\\/?)\\s*([^\\s\\/]+)/; //Used to find the tag name for an element\n\n\t//Regular expressions used for parsing (stateful)\n\tParser._reAttrib = //Find attributes in a tag\n\t\t/([^=<>\\\"\\'\\s]+)\\s*=\\s*\"([^\"]*)\"|([^=<>\\\"\\'\\s]+)\\s*=\\s*'([^']*)'|([^=<>\\\"\\'\\s]+)\\s*=\\s*([^'\"\\s]+)|([^=<>\\\"\\'\\s\\/]+)/g;\n\tParser._reTags = /[\\<\\>]/g; //Find tag markers\n\n\t//**Public**//\n\t//Methods//\n\t//Parses a complete HTML and pushes it to the handler\n\tParser.prototype.parseComplete = function Parser$parseComplete (data) {\n\t\tthis.reset();\n\t\tthis.parseChunk(data);\n\t\tthis.done();\n\t}\n\n\t//Parses a piece of an HTML document\n\tParser.prototype.parseChunk = function Parser$parseChunk (data) {\n\t\tif (this._done)\n\t\t\tthis.handleError(new Error(\"Attempted to parse chunk after parsing already done\"));\n\t\tthis._buffer += data; //FIXME: this can be a bottleneck\n\t\tthis.parseTags();\n\t}\n\n\t//Tells the parser that the HTML being parsed is complete\n\tParser.prototype.done = function Parser$done () {\n\t\tif (this._done)\n\t\t\treturn;\n\t\tthis._done = true;\n\t\n\t\t//Push any unparsed text into a final element in the element list\n\t\tif (this._buffer.length) {\n\t\t\tvar rawData = this._buffer;\n\t\t\tthis._buffer = \"\";\n\t\t\tvar element = {\n\t\t\t\t  raw: rawData\n\t\t\t\t, data: (this._parseState == ElementType.Text) ? rawData : rawData.replace(Parser._reTrim, \"\")\n\t\t\t\t, type: this._parseState\n\t\t\t\t};\n\t\t\tif (this._parseState == ElementType.Tag || this._parseState == ElementType.Script || this._parseState == ElementType.Style)\n\t\t\t\telement.name = this.parseTagName(element.data);\n\t\t\tthis.parseAttribs(element);\n\t\t\tthis._elements.push(element);\n\t\t}\n\t\n\t\tthis.writeHandler();\n\t\tthis._handler.done();\n\t}\n\n\t//Resets the parser to a blank state, ready to parse a new HTML document\n\tParser.prototype.reset = function Parser$reset () {\n\t\tthis._buffer = \"\";\n\t\tthis._done = false;\n\t\tthis._elements = [];\n\t\tthis._elementsCurrent = 0;\n\t\tthis._current = 0;\n\t\tthis._next = 0;\n\t\tthis._location = {\n\t\t\t  row: 0\n\t\t\t, col: 0\n\t\t\t, charOffset: 0\n\t\t\t, inBuffer: 0\n\t\t};\n\t\tthis._parseState = ElementType.Text;\n\t\tthis._prevTagSep = '';\n\t\tthis._tagStack = [];\n\t\tthis._handler.reset();\n\t}\n\t\n\t//**Private**//\n\t//Properties//\n\tParser.prototype._options = null; //Parser options for how to behave\n\tParser.prototype._handler = null; //Handler for parsed elements\n\tParser.prototype._buffer = null; //Buffer of unparsed data\n\tParser.prototype._done = false; //Flag indicating whether parsing is done\n\tParser.prototype._elements =  null; //Array of parsed elements\n\tParser.prototype._elementsCurrent = 0; //Pointer to last element in _elements that has been processed\n\tParser.prototype._current = 0; //Position in data that has already been parsed\n\tParser.prototype._next = 0; //Position in data of the next tag marker (<>)\n\tParser.prototype._location = null; //Position tracking for elements in a stream\n\tParser.prototype._parseState = ElementType.Text; //Current type of element being parsed\n\tParser.prototype._prevTagSep = ''; //Previous tag marker found\n\t//Stack of element types previously encountered; keeps track of when\n\t//parsing occurs inside a script/comment/style tag\n\tParser.prototype._tagStack = null;\n\n\t//Methods//\n\t//Takes an array of elements and parses any found attributes\n\tParser.prototype.parseTagAttribs = function Parser$parseTagAttribs (elements) {\n\t\tvar idxEnd = elements.length;\n\t\tvar idx = 0;\n\t\n\t\twhile (idx < idxEnd) {\n\t\t\tvar element = elements[idx++];\n\t\t\tif (element.type == ElementType.Tag || element.type == ElementType.Script || element.type == ElementType.style)\n\t\t\t\tthis.parseAttribs(element);\n\t\t}\n\t\n\t\treturn(elements);\n\t}\n\n\t//Takes an element and adds an \"attribs\" property for any element attributes found \n\tParser.prototype.parseAttribs = function Parser$parseAttribs (element) {\n\t\t//Only parse attributes for tags\n\t\tif (element.type != ElementType.Script && element.type != ElementType.Style && element.type != ElementType.Tag)\n\t\t\treturn;\n\t\n\t\tvar tagName = element.data.split(Parser._reWhitespace, 1)[0];\n\t\tvar attribRaw = element.data.substring(tagName.length);\n\t\tif (attribRaw.length < 1)\n\t\t\treturn;\n\t\n\t\tvar match;\n\t\tParser._reAttrib.lastIndex = 0;\n\t\twhile (match = Parser._reAttrib.exec(attribRaw)) {\n\t\t\tif (element.attribs == undefined)\n\t\t\t\telement.attribs = {};\n\t\n\t\t\tif (typeof match[1] == \"string\" && match[1].length) {\n\t\t\t\telement.attribs[match[1]] = match[2];\n\t\t\t} else if (typeof match[3] == \"string\" && match[3].length) {\n\t\t\t\telement.attribs[match[3].toString()] = match[4].toString();\n\t\t\t} else if (typeof match[5] == \"string\" && match[5].length) {\n\t\t\t\telement.attribs[match[5]] = match[6];\n\t\t\t} else if (typeof match[7] == \"string\" && match[7].length) {\n\t\t\t\telement.attribs[match[7]] = match[7];\n\t\t\t}\n\t\t}\n\t}\n\n\t//Extracts the base tag name from the data value of an element\n\tParser.prototype.parseTagName = function Parser$parseTagName (data) {\n\t\tif (data == null || data == \"\")\n\t\t\treturn(\"\");\n\t\tvar match = Parser._reTagName.exec(data);\n\t\tif (!match)\n\t\t\treturn(\"\");\n\t\treturn((match[1] ? \"/\" : \"\") + match[2]);\n\t}\n\n\t//Parses through HTML text and returns an array of found elements\n\t//I admit, this function is rather large but splitting up had an noticeable impact on speed\n\tParser.prototype.parseTags = function Parser$parseTags () {\n\t\tvar bufferEnd = this._buffer.length - 1;\n\t\twhile (Parser._reTags.test(this._buffer)) {\n\t\t\tthis._next = Parser._reTags.lastIndex - 1;\n\t\t\tvar tagSep = this._buffer.charAt(this._next); //The currently found tag marker\n\t\t\tvar rawData = this._buffer.substring(this._current, this._next); //The next chunk of data to parse\n\t\n\t\t\t//A new element to eventually be appended to the element list\n\t\t\tvar element = {\n\t\t\t\t  raw: rawData\n\t\t\t\t, data: (this._parseState == ElementType.Text) ? rawData : rawData.replace(Parser._reTrim, \"\")\n\t\t\t\t, type: this._parseState\n\t\t\t};\n\t\n\t\t\tvar elementName = this.parseTagName(element.data);\n\t\n\t\t\t//This section inspects the current tag stack and modifies the current\n\t\t\t//element if we're actually parsing a special area (script/comment/style tag)\n\t\t\tif (this._tagStack.length) { //We're parsing inside a script/comment/style tag\n\t\t\t\tif (this._tagStack[this._tagStack.length - 1] == ElementType.Script) { //We're currently in a script tag\n\t\t\t\t\tif (elementName.toLowerCase() == \"/script\") //Actually, we're no longer in a script tag, so pop it off the stack\n\t\t\t\t\t\tthis._tagStack.pop();\n\t\t\t\t\telse { //Not a closing script tag\n\t\t\t\t\t\tif (element.raw.indexOf(\"!--\") != 0) { //Make sure we're not in a comment\n\t\t\t\t\t\t\t//All data from here to script close is now a text element\n\t\t\t\t\t\t\telement.type = ElementType.Text;\n\t\t\t\t\t\t\t//If the previous element is text, append the current text to it\n\t\t\t\t\t\t\tif (this._elements.length && this._elements[this._elements.length - 1].type == ElementType.Text) {\n\t\t\t\t\t\t\t\tvar prevElement = this._elements[this._elements.length - 1];\n\t\t\t\t\t\t\t\tprevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep + element.raw;\n\t\t\t\t\t\t\t\telement.raw = element.data = \"\"; //This causes the current element to not be added to the element list\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this._tagStack[this._tagStack.length - 1] == ElementType.Style) { //We're currently in a style tag\n\t\t\t\t\tif (elementName.toLowerCase() == \"/style\") //Actually, we're no longer in a style tag, so pop it off the stack\n\t\t\t\t\t\tthis._tagStack.pop();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (element.raw.indexOf(\"!--\") != 0) { //Make sure we're not in a comment\n\t\t\t\t\t\t\t//All data from here to style close is now a text element\n\t\t\t\t\t\t\telement.type = ElementType.Text;\n\t\t\t\t\t\t\t//If the previous element is text, append the current text to it\n\t\t\t\t\t\t\tif (this._elements.length && this._elements[this._elements.length - 1].type == ElementType.Text) {\n\t\t\t\t\t\t\t\tvar prevElement = this._elements[this._elements.length - 1];\n\t\t\t\t\t\t\t\tif (element.raw != \"\") {\n\t\t\t\t\t\t\t\t\tprevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep + element.raw;\n\t\t\t\t\t\t\t\t\telement.raw = element.data = \"\"; //This causes the current element to not be added to the element list\n\t\t\t\t\t\t\t\t} else { //Element is empty, so just append the last tag marker found\n\t\t\t\t\t\t\t\t\tprevElement.raw = prevElement.data = prevElement.raw + this._prevTagSep;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else { //The previous element was not text\n\t\t\t\t\t\t\t\tif (element.raw != \"\") {\n\t\t\t\t\t\t\t\t\telement.raw = element.data = element.raw;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this._tagStack[this._tagStack.length - 1] == ElementType.Comment) { //We're currently in a comment tag\n\t\t\t\t\tvar rawLen = element.raw.length;\n\t\t\t\t\tif (element.raw.charAt(rawLen - 2) == \"-\" && element.raw.charAt(rawLen - 1) == \"-\" && tagSep == \">\") {\n\t\t\t\t\t\t//Actually, we're no longer in a style tag, so pop it off the stack\n\t\t\t\t\t\tthis._tagStack.pop();\n\t\t\t\t\t\t//If the previous element is a comment, append the current text to it\n\t\t\t\t\t\tif (this._elements.length && this._elements[this._elements.length - 1].type == ElementType.Comment) {\n\t\t\t\t\t\t\tvar prevElement = this._elements[this._elements.length - 1];\n\t\t\t\t\t\t\tprevElement.raw = prevElement.data = (prevElement.raw + element.raw).replace(Parser._reTrimComment, \"\");\n\t\t\t\t\t\t\telement.raw = element.data = \"\"; //This causes the current element to not be added to the element list\n\t\t\t\t\t\t\telement.type = ElementType.Text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse //Previous element not a comment\n\t\t\t\t\t\t\telement.type = ElementType.Comment; //Change the current element's type to a comment\n\t\t\t\t\t}\n\t\t\t\t\telse { //Still in a comment tag\n\t\t\t\t\t\telement.type = ElementType.Comment;\n\t\t\t\t\t\t//If the previous element is a comment, append the current text to it\n\t\t\t\t\t\tif (this._elements.length && this._elements[this._elements.length - 1].type == ElementType.Comment) {\n\t\t\t\t\t\t\tvar prevElement = this._elements[this._elements.length - 1];\n\t\t\t\t\t\t\tprevElement.raw = prevElement.data = prevElement.raw + element.raw + tagSep;\n\t\t\t\t\t\t\telement.raw = element.data = \"\"; //This causes the current element to not be added to the element list\n\t\t\t\t\t\t\telement.type = ElementType.Text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\telement.raw = element.data = element.raw + tagSep;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t//Processing of non-special tags\n\t\t\tif (element.type == ElementType.Tag) {\n\t\t\t\telement.name = elementName;\n\t\t\t\tvar elementNameCI = elementName.toLowerCase();\n\t\t\t\t\n\t\t\t\tif (element.raw.indexOf(\"!--\") == 0) { //This tag is really comment\n\t\t\t\t\telement.type = ElementType.Comment;\n\t\t\t\t\tdelete element[\"name\"];\n\t\t\t\t\tvar rawLen = element.raw.length;\n\t\t\t\t\t//Check if the comment is terminated in the current element\n\t\t\t\t\tif (element.raw.charAt(rawLen - 1) == \"-\" && element.raw.charAt(rawLen - 2) == \"-\" && tagSep == \">\")\n\t\t\t\t\t\telement.raw = element.data = element.raw.replace(Parser._reTrimComment, \"\");\n\t\t\t\t\telse { //It's not so push the comment onto the tag stack\n\t\t\t\t\t\telement.raw += tagSep;\n\t\t\t\t\t\tthis._tagStack.push(ElementType.Comment);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (element.raw.indexOf(\"!\") == 0 || element.raw.indexOf(\"?\") == 0) {\n\t\t\t\t\telement.type = ElementType.Directive;\n\t\t\t\t\t//TODO: what about CDATA?\n\t\t\t\t}\n\t\t\t\telse if (elementNameCI == \"script\") {\n\t\t\t\t\telement.type = ElementType.Script;\n\t\t\t\t\t//Special tag, push onto the tag stack if not terminated\n\t\t\t\t\tif (element.data.charAt(element.data.length - 1) != \"/\")\n\t\t\t\t\t\tthis._tagStack.push(ElementType.Script);\n\t\t\t\t}\n\t\t\t\telse if (elementNameCI == \"/script\")\n\t\t\t\t\telement.type = ElementType.Script;\n\t\t\t\telse if (elementNameCI == \"style\") {\n\t\t\t\t\telement.type = ElementType.Style;\n\t\t\t\t\t//Special tag, push onto the tag stack if not terminated\n\t\t\t\t\tif (element.data.charAt(element.data.length - 1) != \"/\")\n\t\t\t\t\t\tthis._tagStack.push(ElementType.Style);\n\t\t\t\t}\n\t\t\t\telse if (elementNameCI == \"/style\")\n\t\t\t\t\telement.type = ElementType.Style;\n\t\t\t\tif (element.name && element.name.charAt(0) == \"/\")\n\t\t\t\t\telement.data = element.name;\n\t\t\t}\n\t\n\t\t\t//Add all tags and non-empty text elements to the element list\n\t\t\tif (element.raw != \"\" || element.type != ElementType.Text) {\n\t\t\t\tif (this._options.includeLocation && !element.location) {\n\t\t\t\t\telement.location = this.getLocation(element.type == ElementType.Tag);\n\t\t\t\t}\n\t\t\t\tthis.parseAttribs(element);\n\t\t\t\tthis._elements.push(element);\n\t\t\t\t//If tag self-terminates, add an explicit, separate closing tag\n\t\t\t\tif (\n\t\t\t\t\telement.type != ElementType.Text\n\t\t\t\t\t&&\n\t\t\t\t\telement.type != ElementType.Comment\n\t\t\t\t\t&&\n\t\t\t\t\telement.type != ElementType.Directive\n\t\t\t\t\t&&\n\t\t\t\t\telement.data.charAt(element.data.length - 1) == \"/\"\n\t\t\t\t\t)\n\t\t\t\t\tthis._elements.push({\n\t\t\t\t\t\t  raw: \"/\" + element.name\n\t\t\t\t\t\t, data: \"/\" + element.name\n\t\t\t\t\t\t, name: \"/\" + element.name\n\t\t\t\t\t\t, type: element.type\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tthis._parseState = (tagSep == \"<\") ? ElementType.Tag : ElementType.Text;\n\t\t\tthis._current = this._next + 1;\n\t\t\tthis._prevTagSep = tagSep;\n\t\t}\n\n\t\tif (this._options.includeLocation) {\n\t\t\tthis.getLocation();\n\t\t\tthis._location.row += this._location.inBuffer;\n\t\t\tthis._location.inBuffer = 0;\n\t\t\tthis._location.charOffset = 0;\n\t\t}\n\t\tthis._buffer = (this._current <= bufferEnd) ? this._buffer.substring(this._current) : \"\";\n\t\tthis._current = 0;\n\t\n\t\tthis.writeHandler();\n\t}\n\n\tParser.prototype.getLocation = function Parser$getLocation (startTag) {\n\t\tvar c,\n\t\t\tl = this._location,\n\t\t\tend = this._current - (startTag ? 1 : 0),\n\t\t\tchunk = startTag && l.charOffset == 0 && this._current == 0;\n\t\t\n\t\tfor (; l.charOffset < end; l.charOffset++) {\n\t\t\tc = this._buffer.charAt(l.charOffset);\n\t\t\tif (c == '\\n') {\n\t\t\t\tl.inBuffer++;\n\t\t\t\tl.col = 0;\n\t\t\t} else if (c != '\\r') {\n\t\t\t\tl.col++;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\t  line: l.row + l.inBuffer + 1\n\t\t\t, col: l.col + (chunk ? 0: 1)\n\t\t};\n\t}\n\n\t//Checks the handler to make it is an object with the right \"interface\"\n\tParser.prototype.validateHandler = function Parser$validateHandler (handler) {\n\t\tif ((typeof handler) != \"object\")\n\t\t\tthrow new Error(\"Handler is not an object\");\n\t\tif ((typeof handler.reset) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'reset' is invalid\");\n\t\tif ((typeof handler.done) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'done' is invalid\");\n\t\tif ((typeof handler.writeTag) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'writeTag' is invalid\");\n\t\tif ((typeof handler.writeText) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'writeText' is invalid\");\n\t\tif ((typeof handler.writeComment) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'writeComment' is invalid\");\n\t\tif ((typeof handler.writeDirective) != \"function\")\n\t\t\tthrow new Error(\"Handler method 'writeDirective' is invalid\");\n\t}\n\n\t//Writes parsed elements out to the handler\n\tParser.prototype.writeHandler = function Parser$writeHandler (forceFlush) {\n\t\tforceFlush = !!forceFlush;\n\t\tif (this._tagStack.length && !forceFlush)\n\t\t\treturn;\n\t\twhile (this._elements.length) {\n\t\t\tvar element = this._elements.shift();\n\t\t\tswitch (element.type) {\n\t\t\t\tcase ElementType.Comment:\n\t\t\t\t\tthis._handler.writeComment(element);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ElementType.Directive:\n\t\t\t\t\tthis._handler.writeDirective(element);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ElementType.Text:\n\t\t\t\t\tthis._handler.writeText(element);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis._handler.writeTag(element);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tParser.prototype.handleError = function Parser$handleError (error) {\n\t\tif ((typeof this._handler.error) == \"function\")\n\t\t\tthis._handler.error(error);\n\t\telse\n\t\t\tthrow error;\n\t}\n\n//TODO: make this a trully streamable handler\nfunction RssHandler (callback) {\n\tRssHandler.super_.call(this, callback, { ignoreWhitespace: true, verbose: false, enforceEmptyTags: false });\n}\ninherits(RssHandler, DefaultHandler);\n\n\tRssHandler.prototype.done = function RssHandler$done () {\n\t\tvar feed = { };\n\t\tvar feedRoot;\n\n\t\tvar found = DomUtils.getElementsByTagName(function (value) { return(value == \"rss\" || value == \"feed\"); }, this.dom, false);\n\t\tif (found.length) {\n\t\t\tfeedRoot = found[0];\n\t\t}\n\t\tif (feedRoot) {\n\t\t\tif (feedRoot.name == \"rss\") {\n\t\t\t\tfeed.type = \"rss\";\n\t\t\t\tfeedRoot = feedRoot.children[0]; //<channel/>\n\t\t\t\tfeed.id = \"\";\n\t\t\t\ttry {\n\t\t\t\t\tfeed.title = DomUtils.getElementsByTagName(\"title\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.link = DomUtils.getElementsByTagName(\"link\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.description = DomUtils.getElementsByTagName(\"description\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.updated = new Date(DomUtils.getElementsByTagName(\"lastBuildDate\", feedRoot.children, false)[0].children[0].data);\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.author = DomUtils.getElementsByTagName(\"managingEditor\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\tfeed.items = [];\n\t\t\t\tDomUtils.getElementsByTagName(\"item\", feedRoot.children).forEach(function (item, index, list) {\n\t\t\t\t\tvar entry = {};\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.id = DomUtils.getElementsByTagName(\"guid\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.title = DomUtils.getElementsByTagName(\"title\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.link = DomUtils.getElementsByTagName(\"link\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.description = DomUtils.getElementsByTagName(\"description\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.pubDate = new Date(DomUtils.getElementsByTagName(\"pubDate\", item.children, false)[0].children[0].data);\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\tfeed.items.push(entry);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfeed.type = \"atom\";\n\t\t\t\ttry {\n\t\t\t\t\tfeed.id = DomUtils.getElementsByTagName(\"id\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.title = DomUtils.getElementsByTagName(\"title\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.link = DomUtils.getElementsByTagName(\"link\", feedRoot.children, false)[0].attribs.href;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.description = DomUtils.getElementsByTagName(\"subtitle\", feedRoot.children, false)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.updated = new Date(DomUtils.getElementsByTagName(\"updated\", feedRoot.children, false)[0].children[0].data);\n\t\t\t\t} catch (ex) { }\n\t\t\t\ttry {\n\t\t\t\t\tfeed.author = DomUtils.getElementsByTagName(\"email\", feedRoot.children, true)[0].children[0].data;\n\t\t\t\t} catch (ex) { }\n\t\t\t\tfeed.items = [];\n\t\t\t\tDomUtils.getElementsByTagName(\"entry\", feedRoot.children).forEach(function (item, index, list) {\n\t\t\t\t\tvar entry = {};\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.id = DomUtils.getElementsByTagName(\"id\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.title = DomUtils.getElementsByTagName(\"title\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.link = DomUtils.getElementsByTagName(\"link\", item.children, false)[0].attribs.href;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.description = DomUtils.getElementsByTagName(\"summary\", item.children, false)[0].children[0].data;\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\ttry {\n\t\t\t\t\t\tentry.pubDate = new Date(DomUtils.getElementsByTagName(\"updated\", item.children, false)[0].children[0].data);\n\t\t\t\t\t} catch (ex) { }\n\t\t\t\t\tfeed.items.push(entry);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dom = feed;\n\t\t}\n\t\tRssHandler.super_.prototype.done.call(this);\n\t}\n\n///////////////////////////////////////////////////\n\nfunction DefaultHandler (callback, options) {\n\tthis.reset();\n\tthis._options = options ? options : { };\n\tif (this._options.ignoreWhitespace == undefined)\n\t\tthis._options.ignoreWhitespace = false; //Keep whitespace-only text nodes\n\tif (this._options.verbose == undefined)\n\t\tthis._options.verbose = true; //Keep data property for tags and raw property for all\n\tif (this._options.enforceEmptyTags == undefined)\n\t\tthis._options.enforceEmptyTags = true; //Don't allow children for HTML tags defined as empty in spec\n\tif ((typeof callback) == \"function\")\n\t\tthis._callback = callback;\n}\n\n\t//**\"Static\"**//\n\t//HTML Tags that shouldn't contain child nodes\n\tDefaultHandler._emptyTags = {\n\t\t  area: 1\n\t\t, base: 1\n\t\t, basefont: 1\n\t\t, br: 1\n\t\t, col: 1\n\t\t, frame: 1\n\t\t, hr: 1\n\t\t, img: 1\n\t\t, input: 1\n\t\t, isindex: 1\n\t\t, link: 1\n\t\t, meta: 1\n\t\t, param: 1\n\t\t, embed: 1\n\t}\n\t//Regex to detect whitespace only text nodes\n\tDefaultHandler.reWhitespace = /^\\s*$/;\n\n\t//**Public**//\n\t//Properties//\n\tDefaultHandler.prototype.dom = null; //The hierarchical object containing the parsed HTML\n\t//Methods//\n\t//Resets the handler back to starting state\n\tDefaultHandler.prototype.reset = function DefaultHandler$reset() {\n\t\tthis.dom = [];\n\t\tthis._done = false;\n\t\tthis._tagStack = [];\n\t\tthis._tagStack.last = function DefaultHandler$_tagStack$last () {\n\t\t\treturn(this.length ? this[this.length - 1] : null);\n\t\t}\n\t}\n\t//Signals the handler that parsing is done\n\tDefaultHandler.prototype.done = function DefaultHandler$done () {\n\t\tthis._done = true;\n\t\tthis.handleCallback(null);\n\t}\n\tDefaultHandler.prototype.writeTag = function DefaultHandler$writeTag (element) {\n\t\tthis.handleElement(element);\n\t} \n\tDefaultHandler.prototype.writeText = function DefaultHandler$writeText (element) {\n\t\tif (this._options.ignoreWhitespace)\n\t\t\tif (DefaultHandler.reWhitespace.test(element.data))\n\t\t\t\treturn;\n\t\tthis.handleElement(element);\n\t} \n\tDefaultHandler.prototype.writeComment = function DefaultHandler$writeComment (element) {\n\t\tthis.handleElement(element);\n\t} \n\tDefaultHandler.prototype.writeDirective = function DefaultHandler$writeDirective (element) {\n\t\tthis.handleElement(element);\n\t}\n\tDefaultHandler.prototype.error = function DefaultHandler$error (error) {\n\t\tthis.handleCallback(error);\n\t}\n\n\t//**Private**//\n\t//Properties//\n\tDefaultHandler.prototype._options = null; //Handler options for how to behave\n\tDefaultHandler.prototype._callback = null; //Callback to respond to when parsing done\n\tDefaultHandler.prototype._done = false; //Flag indicating whether handler has been notified of parsing completed\n\tDefaultHandler.prototype._tagStack = null; //List of parents to the currently element being processed\n\t//Methods//\n\tDefaultHandler.prototype.handleCallback = function DefaultHandler$handleCallback (error) {\n\t\t\tif ((typeof this._callback) != \"function\")\n\t\t\t\tif (error)\n\t\t\t\t\tthrow error;\n\t\t\t\telse\n\t\t\t\t\treturn;\n\t\t\tthis._callback(error, this.dom);\n\t}\n\t\n\tDefaultHandler.prototype.isEmptyTag = function(element) {\n\t\tvar name = element.name.toLowerCase();\n\t\tif (name.charAt(0) == '/') {\n\t\t\tname = name.substring(1);\n\t\t}\n\t\treturn this._options.enforceEmptyTags && !!DefaultHandler._emptyTags[name];\n\t};\n\t\n\tDefaultHandler.prototype.handleElement = function DefaultHandler$handleElement (element) {\n\t\tif (this._done)\n\t\t\tthis.handleCallback(new Error(\"Writing to the handler after done() called is not allowed without a reset()\"));\n\t\tif (!this._options.verbose) {\n//\t\t\telement.raw = null; //FIXME: Not clean\n\t\t\t//FIXME: Serious performance problem using delete\n\t\t\tdelete element.raw;\n\t\t\tif (element.type == \"tag\" || element.type == \"script\" || element.type == \"style\")\n\t\t\t\tdelete element.data;\n\t\t}\n\t\tif (!this._tagStack.last()) { //There are no parent elements\n\t\t\t//If the element can be a container, add it to the tag stack and the top level list\n\t\t\tif (element.type != ElementType.Text && element.type != ElementType.Comment && element.type != ElementType.Directive) {\n\t\t\t\tif (element.name.charAt(0) != \"/\") { //Ignore closing tags that obviously don't have an opening tag\n\t\t\t\t\tthis.dom.push(element);\n\t\t\t\t\tif (!this.isEmptyTag(element)) { //Don't add tags to the tag stack that can't have children\n\t\t\t\t\t\tthis._tagStack.push(element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse //Otherwise just add to the top level list\n\t\t\t\tthis.dom.push(element);\n\t\t}\n\t\telse { //There are parent elements\n\t\t\t//If the element can be a container, add it as a child of the element\n\t\t\t//on top of the tag stack and then add it to the tag stack\n\t\t\tif (element.type != ElementType.Text && element.type != ElementType.Comment && element.type != ElementType.Directive) {\n\t\t\t\tif (element.name.charAt(0) == \"/\") {\n\t\t\t\t\t//This is a closing tag, scan the tagStack to find the matching opening tag\n\t\t\t\t\t//and pop the stack up to the opening tag's parent\n\t\t\t\t\tvar baseName = element.name.substring(1);\n\t\t\t\t\tif (!this.isEmptyTag(element)) {\n\t\t\t\t\t\tvar pos = this._tagStack.length - 1;\n\t\t\t\t\t\twhile (pos > -1 && this._tagStack[pos--].name != baseName) { }\n\t\t\t\t\t\tif (pos > -1 || this._tagStack[0].name == baseName)\n\t\t\t\t\t\t\twhile (pos < this._tagStack.length - 1)\n\t\t\t\t\t\t\t\tthis._tagStack.pop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse { //This is not a closing tag\n\t\t\t\t\tif (!this._tagStack.last().children)\n\t\t\t\t\t\tthis._tagStack.last().children = [];\n\t\t\t\t\tthis._tagStack.last().children.push(element);\n\t\t\t\t\tif (!this.isEmptyTag(element)) //Don't add tags to the tag stack that can't have children\n\t\t\t\t\t\tthis._tagStack.push(element);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse { //This is not a container element\n\t\t\t\tif (!this._tagStack.last().children)\n\t\t\t\t\tthis._tagStack.last().children = [];\n\t\t\t\tthis._tagStack.last().children.push(element);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar DomUtils = {\n\t\t  testElement: function DomUtils$testElement (options, element) {\n\t\t\tif (!element) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tfor (var key in options) {\n\t\t\t\tif (key == \"tag_name\") {\n\t\t\t\t\tif (element.type != \"tag\" && element.type != \"script\" && element.type != \"style\") {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!options[\"tag_name\"](element.name)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else if (key == \"tag_type\") {\n\t\t\t\t\tif (!options[\"tag_type\"](element.type)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else if (key == \"tag_contains\") {\n\t\t\t\t\tif (element.type != \"text\" && element.type != \"comment\" && element.type != \"directive\") {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!options[\"tag_contains\"](element.data)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!element.attribs || !options[key](element.attribs[key])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\treturn true;\n\t\t}\n\t\n\t\t, getElements: function DomUtils$getElements (options, currentElement, recurse, limit) {\n\t\t\trecurse = (recurse === undefined || recurse === null) || !!recurse;\n\t\t\tlimit = isNaN(parseInt(limit)) ? -1 : parseInt(limit);\n\n\t\t\tif (!currentElement) {\n\t\t\t\treturn([]);\n\t\t\t}\n\t\n\t\t\tvar found = [];\n\t\t\tvar elementList;\n\n\t\t\tfunction getTest (checkVal) {\n\t\t\t\treturn(function (value) { return(value == checkVal); });\n\t\t\t}\n\t\t\tfor (var key in options) {\n\t\t\t\tif ((typeof options[key]) != \"function\") {\n\t\t\t\t\toptions[key] = getTest(options[key]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (DomUtils.testElement(options, currentElement)) {\n\t\t\t\tfound.push(currentElement);\n\t\t\t}\n\n\t\t\tif (limit >= 0 && found.length >= limit) {\n\t\t\t\treturn(found);\n\t\t\t}\n\n\t\t\tif (recurse && currentElement.children) {\n\t\t\t\telementList = currentElement.children;\n\t\t\t} else if (currentElement instanceof Array) {\n\t\t\t\telementList = currentElement;\n\t\t\t} else {\n\t\t\t\treturn(found);\n\t\t\t}\n\t\n\t\t\tfor (var i = 0; i < elementList.length; i++) {\n\t\t\t\tfound = found.concat(DomUtils.getElements(options, elementList[i], recurse, limit));\n\t\t\t\tif (limit >= 0 && found.length >= limit) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn(found);\n\t\t}\n\t\t\n\t\t, getElementById: function DomUtils$getElementById (id, currentElement, recurse) {\n\t\t\tvar result = DomUtils.getElements({ id: id }, currentElement, recurse, 1);\n\t\t\treturn(result.length ? result[0] : null);\n\t\t}\n\t\t\n\t\t, getElementsByTagName: function DomUtils$getElementsByTagName (name, currentElement, recurse, limit) {\n\t\t\treturn(DomUtils.getElements({ tag_name: name }, currentElement, recurse, limit));\n\t\t}\n\t\t\n\t\t, getElementsByTagType: function DomUtils$getElementsByTagType (type, currentElement, recurse, limit) {\n\t\t\treturn(DomUtils.getElements({ tag_type: type }, currentElement, recurse, limit));\n\t\t}\n\t}\n\n\tfunction inherits (ctor, superCtor) {\n\t\tvar tempCtor = function(){};\n\t\ttempCtor.prototype = superCtor.prototype;\n\t\tctor.super_ = superCtor;\n\t\tctor.prototype = new tempCtor();\n\t\tctor.prototype.constructor = ctor;\n\t}\n\nexports.Parser = Parser;\n\nexports.DefaultHandler = DefaultHandler;\n\nexports.RssHandler = RssHandler;\n\nexports.ElementType = ElementType;\n\nexports.DomUtils = DomUtils;\n\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/htmlparser/lib/htmlparser.js\n// module id = 10\n// module chunks = 0","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-12 \r\n ************************/\r\n\r\nimport {Window} from \"../Windows/Window\"\r\nimport style from \"../stylesheets/textEditor.scss\"\r\n\r\nconst template = `<div class=\"text-editor\">\r\n    <div class=\"toolbar\">\r\n        <span class=\"btn\"><i class=\"fa fa-file-text-o\" aria-hidden=\"true\"></i></span>\r\n        <span class=\"btn\"><i class=\"fa fa-floppy-o\" aria-hidden=\"true\"></i></span>\r\n    </div>\r\n    <textarea class=\"real-editor\"></textarea>\r\n</div>`\r\n\r\nexport class TextEditor extends Window {\r\n\r\n    constructor(wm) {\r\n        super(wm);\r\n        this.Slot('default', this.RenderTemplate(template));\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/TextEditor/TextEditor.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./textEditor.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./textEditor.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./textEditor.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/stylesheets/textEditor.scss\n// module id = 12\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".text-editor .toolbar {\\n  height: 20px; }\\n  .text-editor .toolbar .btn {\\n    margin: 2px; }\\n  .text-editor .toolbar .btn:hover {\\n    background: lightblue; }\\n\\n.text-editor .real-editor {\\n  height: 260px;\\n  width: 396px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/stylesheets/textEditor.scss\n// module id = 13\n// module chunks = 0","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-12 \r\n ************************/\r\n\r\nimport {Window} from \"../Windows/Window.js\"\r\nimport {FileItem} from \"./FileItem.js\"\r\n\r\nconst template = `<div class=\"pathContainer\">\r\n    <input type=\"text\" />\r\n    <div class=\"itemContainer unselectable\" ref=\"fileContainer\">\r\n    </div>\r\n</div>`\r\n\r\nexport class FileWindow extends Window {\r\n\r\n    constructor(wm) {\r\n        super(wm);\r\n        this.Slot('default', this.RenderTemplate(template))\r\n\r\n        let fi1 = new FileItem();\r\n        fi1.fileType = \"text\";\r\n        fi1.filename = \"text1.txt\";\r\n        let fi2 = new FileItem();\r\n        fi2.fileType = \"folder\";\r\n        fi2.filename = \"abc\";\r\n\r\n        this.$refs.fileContainer.appendChild(fi1.dom);\r\n        this.$refs.fileContainer.appendChild(fi2.dom);\r\n    }\r\n\r\n    render() {\r\n        const style = {\r\n            height: 260 + \"px\",\r\n        };\r\n        return null;\r\n    }\r\n\r\n    inputPathChanged(event) {\r\n        this.setState({\r\n            path: event.target.value\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Files/FileWindow.js","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-12 \r\n ************************/\r\n\r\nimport style from \"../stylesheets/file.scss\"\r\nimport {Component} from \"../Windows/Window\"\r\n\r\nconst template = `<div class=\"file-item\">\r\n    <img ref=\"iconimg\" class=\"file-icon undraggable\" />\r\n    <p class=\"filename\" ref=\"filename\"></p>\r\n</div>`\r\n\r\nexport class FileItem extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this._dom = this.RenderTemplate(template);\r\n    }\r\n\r\n    get fileType() {\r\n        return this._fileType;\r\n    }\r\n\r\n    set fileType(value) {\r\n        this._fileType = value;\r\n\r\n        if (this._fileType == \"folder\") {\r\n            this.$refs.iconimg.setAttribute(\"src\", \"assets/images/Folder-icon.png\");\r\n        } else {\r\n            this.$refs.iconimg.setAttribute(\"src\", \"assets/images/Text-Document-icon.png\");\r\n        }\r\n    }\r\n\r\n    get filename() {\r\n        return this._filename;\r\n    }\r\n\r\n    set filename(value) {\r\n        this._filename = value;\r\n        this.$refs.filename.innerText = value;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Files/FileItem.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./file.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./file.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./file.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/stylesheets/file.scss\n// module id = 16\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".file-item {\\n  display: inline-block;\\n  width: 100px;\\n  cursor: default; }\\n  .file-item .file-icon {\\n    width: 100px;\\n    height: 100px; }\\n  .file-item .filename {\\n    color: grey;\\n    margin: 0px;\\n    text-align: center; }\\n\\n.file-item:hover {\\n  background: lightblue; }\\n\\n.itemContainer {\\n  overflow-y: scroll; }\\n\\n.pathContainer {\\n  width: 100%; }\\n  .pathContainer input {\\n    width: 99%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/stylesheets/file.scss\n// module id = 17\n// module chunks = 0","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-12 \r\n ************************/\r\n\r\nimport {Window} from \"../Windows/Window.js\"\r\nimport style from \"../stylesheets/programExecutor.scss\"\r\n\r\nconst template = `<div ref=\"frame\" class=\"program-executor\">\r\n    <div class=\"toolbar unselectable\">\r\n        <div ref=\"runBtn\" class=\"item\">\r\n            <img class=\"undraggable\" src=\"assets/images/exe/run.png\" />\r\n        </div>\r\n        <div ref=\"pauseBtn\" class=\"item\">\r\n            <img class=\"undraggable\" src=\"assets/images/exe/pause.png\" />\r\n        </div>\r\n        <div ref=\"stopBtn\" class=\"item\">\r\n            <img class=\"undraggable\" src=\"assets/images/exe/stop.png\" />\r\n        </div>\r\n        <div ref=\"stepForwardBtn\" class=\"item\">\r\n            <img class=\"undraggable\" src=\"assets/images/exe/step-forward.png\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"main-table row\" ref=\"programFrame\">\r\n        <div class=\"col-8 code-area\">\r\n            <div class=\"line\">\r\n                <div class=\"gutter unselectable\">1</div>\r\n                <div class=\"content\">ADD R1, 3, 2</div>\r\n            </div>\r\n            <div class=\"line\">\r\n                <div class=\"gutter unselectable\">2</div>\r\n                <div class=\"content\">ADD 3</div>\r\n            </div>\r\n            <div class=\"line\">\r\n                <div class=\"gutter unselectable\">3</div>\r\n                <div class=\"content\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-4 watcher\">\r\n            <div class=\"variable-area\" ref=\"variableArea\">\r\n                <div class=\"title unselectable\">Variable Watcher</div>\r\n                <div class=\"content\">\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"constant-area\" ref=\"variableArea\">\r\n                <div class=\"title unselectable\">Constant Watcher</div>\r\n                <div class=\"content\">\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                    <div><span class=\"variable\">a</span>: 3</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>`\r\n\r\nconst source_code = `\r\nADD     R1,  1,  1\r\nADD     R2, R1,  1\r\nLOAD    R3, R2,  0\r\nSTORE   R1, R3,  0\r\n`\r\n\r\nfunction initBtn(btn) {\r\n    let img = btn.querySelector('img');\r\n    btn.addEventListener('mousedown', (e) => {\r\n        img.classList.add('clicked');\r\n    })\r\n    btn.addEventListener('mouseup', (e) => {\r\n        img.classList.remove('clicked');\r\n    });\r\n}\r\n\r\nexport class ProgramExecutor extends Window {\r\n\r\n    constructor(wm) {\r\n        super(wm);\r\n        this.Slot('default', this.RenderTemplate(template));\r\n        this.width = 640;\r\n        this.height = 480;\r\n\r\n        this.$refs.frame.style.height = this.height - 16 + 'px';\r\n        this.$refs.programFrame.style.height = this.height - 16 - 48 + 'px';\r\n\r\n        this.$refs.runBtn.addEventListener('click', (e) => this.onRunClicked(e));\r\n        this.$refs.pauseBtn.addEventListener('click', (e) => this.onPauseClicked(e));\r\n        this.$refs.stopBtn.addEventListener('click', (e) => this.onStopClicked(e));\r\n        this.$refs.stepForwardBtn.addEventListener('click', (e) => this.onStepForwardClicked(e));\r\n\r\n        initBtn(this.$refs.runBtn);\r\n        initBtn(this.$refs.pauseBtn);\r\n        initBtn(this.$refs.stopBtn);\r\n        initBtn(this.$refs.stepForwardBtn);\r\n\r\n        this.title = \"Program Executor\";\r\n    }\r\n\r\n    onRunClicked(event) {\r\n\r\n    }\r\n\r\n    onPauseClicked(event) {\r\n\r\n    }\r\n\r\n    onStopClicked(event) {\r\n\r\n    }\r\n\r\n    onStepForwardClicked(event) {\r\n\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ProgramExecutor/ProgramExecutor.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./programExecutor.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./programExecutor.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./programExecutor.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/stylesheets/programExecutor.scss\n// module id = 19\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".program-executor .toolbar {\\n  height: 48px; }\\n  .program-executor .toolbar .item {\\n    display: inline-block; }\\n    .program-executor .toolbar .item img {\\n      width: 48px;\\n      height: 48px; }\\n  .program-executor .toolbar .item:hover {\\n    background: lightblue; }\\n\\n.program-executor .line {\\n  height: 18px; }\\n  .program-executor .line .gutter {\\n    display: inline-block;\\n    background-color: lightgrey;\\n    width: 52px;\\n    text-align: right;\\n    padding-right: 8px; }\\n  .program-executor .line .content {\\n    display: inline-block;\\n    padding-left: 16px; }\\n\\n.program-executor .watcher {\\n  height: 99%; }\\n  .program-executor .watcher .title {\\n    font-size: 14px;\\n    padding-top: 2px;\\n    padding-bottom: 2px;\\n    padding-left: 4px;\\n    padding-right: 4px;\\n    background-color: lightgrey; }\\n  .program-executor .watcher .content {\\n    padding: 4px; }\\n  .program-executor .watcher .variable {\\n    color: #6161FF;\\n    cursor: default; }\\n  .program-executor .watcher .variable:hover {\\n    text-decoration: underline; }\\n\\n.program-executor .variable-area {\\n  height: 60%; }\\n\\n.program-executor .constant-area {\\n  height: 40%; }\\n\\n.program-executor .code-area {\\n  height: 99%;\\n  overflow-y: scroll; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/stylesheets/programExecutor.scss\n// module id = 20\n// module chunks = 0","/************************ \n * Author: DZ Chan \n * Date:   2017-08-12 \n ************************/\n\nconst resources = \"[3][4]1\" +\n\"[5]\" +\n\"\" +\n\"The Matrix1999200323\";\n\nfunction ShuffleString(str, len) {\n    let result = \"\";\n    let str_len = str.length;\n    for (let i = 0; i < len; i++) {\n        let rd = Math.round(Math.random(new Date()) * str_len);\n        result += str[rd];\n    }\n    return result;\n}\n\nconst total_level = 128;\nconst black_level = 72;\n\nexport class VirtualLine {\n\n    constructor(x_offset, width, height, font_width, font_height) {\n        this._x_offset = x_offset;\n        this._width = width;\n        this._height = height;\n\n        this._font_width = font_width;\n        this._font_height = font_height;\n\n        this._content = ShuffleString(resources, total_level);\n\n        this._tick = total_level;\n        this._offset_step = Math.round(Math.random() * total_level);\n    }\n\n    paint(ctx, deltaTime) {\n        const text_length = Math.ceil(this._height / this._font_height);\n        for (let i = 0; i < text_length; i++) {\n            const absolute_level = (i + this._offset_step - this._tick) % total_level + total_level;\n            if (absolute_level > black_level) {\n                const color_level = absolute_level - black_level;\n                const green_level = Math.round((color_level / (total_level - black_level)) * 255);\n                if (green_level === 255) {\n                    ctx.shadowColor = \"white\";\n                    ctx.shadowOffsetX = 0;\n                    ctx.shadowOffsetY = 0;\n                    ctx.shadowBlur = 10;\n                    ctx.fillStyle = \"rgb(20,\" + green_level.toString() + \",20)\"; \n                } else {\n                    ctx.shadowBlur = 0;\n                    ctx.fillStyle = \"rgb(0,\" + green_level.toString() + \",0)\"; \n                }\n                ctx.fillText(this._content[i], this._x_offset, i * this._font_height);\n            }\n        }\n        this._tick++;\n\n        const test_level = (this._offset_step - this._tick) % total_level + total_level;\n        if (test_level === 1) {\n            this._content = ShuffleString(resources, total_level);\n        }\n        /*\n        if (this._tick % this._offset_step === 0) {\n            this._content = ShuffleString(resources);\n        }\n        */\n    }\n\n    get x_offset() {\n        return this._x_offset;\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    set width(value) {\n        this._width = value;\n    }\n\n    get height() {\n        return this._height;\n    }\n\n    set height(value) {\n        this._height = value;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/VirtualLine.js","/************************ \n * Author: DZ Chan \n * Date:   2017-08-14 \n ************************/ \n\nimport {Window} from \"../Windows/Window\"\nimport style from \"../stylesheets/taskManager.scss\"\n\nconst task_manager_template = `<div id=\"task-manager\" class=\"task-manager\">\n    <div class=\"tabs\">\n        <ul class=\"unselectable\">\n            <li v-bind:class=\"{ active: nav_number == 1}\" v-on:click=\"choose(1)\">Process</li>\n            <li v-bind:class=\"{ active: nav_number == 2}\" v-on:click=\"choose(2)\">CPU</li>\n            <li v-bind:class=\"{ active: nav_number == 3}\" v-on:click=\"choose(3)\">Memory</li>\n            <li v-bind:class=\"{ active: nav_number == 4}\" v-on:click=\"choose(4)\">Information</li>\n        </ul>\n    </div>\n    <div class=\"main-frame\">\n        <slot name=\"processPage\" />\n        <slot name=\"cpuPage\" />\n        <slot name=\"memoryPage\" />\n        <slot name=\"infoPage\" />\n    </div>\n</div>`;\n\nconst process_page_template = `<div v-show=\"nav_number == 1\" class=\"process-page page\">\n    <table>\n        <thead>\n            <tr>\n                <th align=\"left\">PID</th>\n                <th align=\"left\">Process Name</th>\n                <th align=\"left\">Memory</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>#aaa</td>\n                <td>Name.asm</td>\n                <td>10k</td>\n            </tr>\n        </tbody>\n    </table>\n</div>`;\n\nconst cpu_page_template = `<div v-show=\"nav_number == 2\" class=\"cpu-page page\">\n</div>`;\n\nconst memory_page_template = `<div v-show=\"nav_number == 3\" class=\"memory-page page\">\n</div>`;\n\nconst info_page_template = `<div v-show=\"nav_number == 4\" class=\"info-page page\">\n    <div class=\"content-body\">\n        <h1>ZOS</h1>\n        <table>\n            <tbody>\n                <tr>\n                    <td align=\"left\" class=\"name\">ComputerName</td>\n                    <td align=\"left\">ZOS-Simualtor</td>\n                </tr>\n                <tr>\n                    <td align=\"left\" class=\"name\">Company</td>\n                    <td align=\"left\">fsociety</td>\n                </tr>\n                <tr>\n                    <td align=\"left\" class=\"name\">OS Version</td>\n                    <td align=\"left\">ZOS-1.0.0</td>\n                </tr>\n                <tr>\n                    <td align=\"left\" class=\"name\">Processor</td>\n                    <td align=\"left\">ZVM 1.0.0</td>\n                </tr>\n                <tr>\n                    <td align=\"left\" class=\"name\">Memory</td>\n                    <td align=\"left\">256k</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>`;\n\nexport class TaskManager extends Window {\n\n    constructor(wm) {\n        super(wm);\n        this.Slot('default', this.RenderTemplate(task_manager_template));\n\n        this.Slot('processPage', this.RenderTemplate(process_page_template));\n        this.Slot('cpuPage', this.RenderTemplate(cpu_page_template));\n        this.Slot('memoryPage', this.RenderTemplate(memory_page_template));\n        this.Slot('infoPage', this.RenderTemplate(info_page_template));\n\n        this.width = 640;\n        this.height = 480;\n\n        this.title = \"Task Manager\"\n    }\n\n    Render(dom) {\n        super.Render(dom);\n    }\n\n    onMounted() {\n        let app = new Vue({\n            el: '#task-manager',\n            data: {\n                nav_number: 1,\n                message: 'Hello world',\n            },\n            methods: {\n\n                choose(number) {\n                    this.nav_number = number;\n                }\n\n            }\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/TaskManager/TaskManager.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./taskManager.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./taskManager.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./taskManager.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/stylesheets/taskManager.scss\n// module id = 23\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".tabs ul {\\n  padding: 0px;\\n  margin: 0px; }\\n  .tabs ul li {\\n    display: inline-block;\\n    list-style: none;\\n    margin: 0px;\\n    padding-top: 8px;\\n    padding-bottom: 8px;\\n    padding-left: 14px;\\n    padding-right: 14px; }\\n  .tabs ul li.active {\\n    background-color: #ADD8E6; }\\n  .tabs ul li:hover {\\n    background-color: #C6DAE0;\\n    cursor: pointer; }\\n\\n.process-page table {\\n  width: 100%;\\n  border-collapse: collapse; }\\n  .process-page table tbody tr:hover {\\n    background-color: lightgrey; }\\n\\n.info-page .name {\\n  font-weight: bold; }\\n\\n.info-page .content-body {\\n  text-align: center; }\\n\\n.info-page table {\\n  margin-left: 50%;\\n  transform: translateX(-50%); }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/stylesheets/taskManager.scss\n// module id = 24\n// module chunks = 0","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-12 \r\n ************************/\r\n\r\nimport {Emitter} from \"../Emitter\"\r\nimport {Program} from \"./Program\"\r\nimport {Compile} from \"./Compiler\"\r\n\r\nconst OP_STOP   = 0;\r\nconst OP_ADD    = 1;\r\nconst OP_SUB    = 2;\r\nconst OP_MUL    = 3;\r\nconst OP_DIV    = 4;\r\nconst OP_LOAD   = 5;\r\nconst OP_STORE  = 6;\r\nconst OP_CMP    = 7;\r\nconst OP_JMP    = 8;\r\nconst OP_JMP_GT = 9;\r\nconst OP_JMP_LT = 10;\r\nconst OP_JMP_GTEQ = 11;\r\nconst OP_JMP_LTEQ = 12;\r\nconst OP_JMP_EQ = 13;\r\nconst OP_NOTSTRICT_EQL = 36;\r\nconst OP_SLICE  = 37;\r\nconst OP_TOINT  = 64;\r\nconst OP_TOSTR  = 65;\r\n\r\nexport class VM extends Emitter {\r\n\r\n    constructor() {\r\n        super();\r\n        this._context_queue = [];\r\n        this._current_context = null;\r\n    }\r\n\r\n    // Run the program directly\r\n    Run(program) {\r\n        let new_pid = this._context_queue.length;\r\n        let ctx = new Context();\r\n        ctx.pid = new_pid;\r\n        ctx.program = program;\r\n        this._context_queue.push(ctx);\r\n    }\r\n\r\n    // Run the program and listen to the\r\n    // every step of the program\r\n    RunDebug(program, callback) {\r\n\r\n    }\r\n\r\n    // This method compile \r\n    // asm file into opcode\r\n    CompileASM(source_code) {\r\n\r\n    }\r\n\r\n    // Compile and run the program\r\n    Eval(source_code) {\r\n\r\n    }\r\n\r\n    ExtractRegisterNumber(content) {\r\n        if (content[0] != 'R' && content[0] != 'r')\r\n            throw new Error(\"OP must be a register\");\r\n        return parseInt(content[1]);\r\n    }\r\n\r\n    // Swith program to run\r\n    // or step program\r\n    Tick() {\r\n        this.emit(\"tick\");\r\n    }\r\n\r\n    Step() {\r\n        let ctx = this._current_context;\r\n        let current_pc = ctx.pc;\r\n        ctx.pc++;\r\n\r\n        let inst = ctx.program.instructions[current_pc];\r\n        let op_code = inst[0],\r\n            op1 = inst[1],\r\n            op2 = inst[2],\r\n            op3 = inst[3];\r\n\r\n        function GetValue(op) {\r\n            if (typeof op == \"number\") {\r\n                return op;\r\n            } else if (typeof op == \"string\") {\r\n                if (op[0] == 'R' || op[0] == 'r')  {\r\n                    return ctx.registers[parseInt(op[1])];\r\n                } else if (op[0] == 'C' || op[0] == 'c') {\r\n                    return ctx.program.constants[parseInt(op[1])];\r\n                } else {\r\n                    throw new Error(\"Not a register\");\r\n                }\r\n            } else {\r\n                throw new Error(\"Not a legal type: \" + typeof op);\r\n            }\r\n        }\r\n        let targetReisterNumber, val1, val2, newValue;\r\n\r\n        this.emit('before-step', current_pc, inst);\r\n\r\n        switch(inst[0]) {\r\n        case OP_STOP:\r\n            this.Kill(ctx.pid);\r\n            break;\r\n        case OP_ADD:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            val2 = GetValue(op3);\r\n            newValue = val1 + val2;\r\n            ctx.registers[targetReisterNumber] = newValue;\r\n            ctx.flags.type = typeof newValue;\r\n            ctx.flags.zero = newValue === 0;\r\n            ctx.flags.sign = newValue < 0;\r\n            break;\r\n        case OP_SUB:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            val2 = GetValue(op3);\r\n            newValue = val1 - val2;\r\n            ctx.registers[targetReisterNumber] = newValue;\r\n            ctx.flags.type = typeof newValue;\r\n            ctx.flags.zero = newValue === 0;\r\n            ctx.flags.sign = newValue < 0;\r\n            break;\r\n        case OP_MUL:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            val2 = GetValue(op3);\r\n            newValue = val1 * val2;\r\n            ctx.registers[targetReisterNumber] = newValue;\r\n            ctx.flags.type = typeof newValue;\r\n            ctx.flags.zero = newValue === 0;\r\n            ctx.flags.sign = newValue < 0;\r\n            break;\r\n        case OP_DIV:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            val2 = GetValue(op3);\r\n            newValue = val1 / val2;\r\n            ctx.registers[targetReisterNumber] = newValue;\r\n            ctx.flags.type = typeof newValue;\r\n            ctx.flags.zero = newValue === 0;\r\n            ctx.flags.sign = newValue < 0;\r\n            break;\r\n        case OP_LOAD:\r\n            break;\r\n        case OP_STORE:\r\n            break;\r\n        case OP_CMP:\r\n            val1 = GetValue(op1);\r\n            val2 = GetValue(op2);\r\n            if (typeof val1 != \"number\" && typeof val2 != \"number\") {\r\n                throw new Error(\"You can not compare somthing that is not number.\");\r\n            }\r\n            ctx.flags.zero = val === val2;\r\n            ctx.flags.sign = val1 < val2;\r\n            break;\r\n        case OP_JMP:\r\n            val1 = GetValue(op1);\r\n            if (typeof val1 != \"number\") {\r\n                throw new Error(\"You can not jump to an offset that is not number.\");\r\n            }\r\n            ctx.pc = val1;\r\n            break;\r\n        case OP_NOTSTRICT_EQL:\r\n            val1 = GetValue(op1);\r\n            val2 = GetValue(op2);\r\n            ctx.flags.zero = val1 == val2;\r\n            break;\r\n        case OP_SLICE:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            val2 = GetValue(op3);\r\n            ctx.registers[targetReisterNumber] = ctx.registers[targetReisterNumber].slice(val1, val2);\r\n            break;\r\n        case OP_TOINT:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            ctx.registers[targetReisterNumber] = parseInt(val1);\r\n            ctx.flags.sign = \"number\";\r\n            break;\r\n        case OP_TOSTR:\r\n            targetReisterNumber = this.ExtractRegisterNumber(op1);\r\n            val1 = GetValue(op2);\r\n            ctx.registers[targetReisterNumber] = val1.toString();\r\n            ctx.flags.sign = \"string\";\r\n            break;\r\n        }\r\n\r\n        this.emit('after-step');\r\n    }\r\n\r\n    Kill(pid) {\r\n        this.emit('kill', pid);\r\n        throw new Error(\"Not implemented\");\r\n    }\r\n\r\n    get pc() {\r\n        return this._current_context.pc;\r\n    }\r\n\r\n    get flags() {\r\n        return this._current_context.flags;\r\n    }\r\n\r\n}\r\n\r\nfunction newInst(op_code, a1, a2, a3) {\r\n    return [op_code, a1, a2, a3];\r\n}\r\n\r\nexport class Context {\r\n\r\n    constructor() {\r\n        this._registers = [];\r\n        this._registers.length = 16;\r\n        this._flags = {\r\n            zero: false,    // equal\r\n            sign: false,    // less than\r\n            type: \"undefined\"\r\n        }\r\n        this._pc = 0;\r\n        this._pid = -1;\r\n    }\r\n\r\n    get registers() {\r\n        return this._registers;\r\n    }\r\n\r\n    get program() {\r\n        return this._program;\r\n    }\r\n\r\n    set program(value) {\r\n        this._program = value;\r\n    }\r\n\r\n    set pc(value) {\r\n        this._pc = value;\r\n    }\r\n\r\n    get pc() {\r\n        return this._pc;\r\n    }\r\n\r\n    set pid(value) {\r\n        this._pid = value;\r\n    }\r\n\r\n    get pid() {\r\n        return this._pid;\r\n    }\r\n\r\n    get flags() {\r\n        return this._flags;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Core/VM.js","\r\nexport class Program {\r\n\r\n    constructor() {\r\n        this._constants = [];\r\n        this._instructions = [];\r\n    }\r\n\r\n    AddInstruction(op_code, a1, a2, a3) {\r\n        this._instructions.push(newInst(op_code, a1, a2, a3));\r\n    }\r\n\r\n    AddConstant(constant) {\r\n        this._constants.push(constant);\r\n        return this._constants.length;\r\n    }\r\n\r\n    get constants() {\r\n        return this._constants;\r\n    }\r\n\r\n    get instructions() {\r\n        return this._instructions;\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Core/Program.js","/************************ \r\n * Author: DZ Chan \r\n * Date:   2017-08-14 \r\n ************************/ \r\nimport {Program} from \"./Program\"\r\n\r\nlet regex_line = /([a-zA-Z]+)\\s+([RC]?\\d+)\\s*,\\s*([RC]?\\d+)\\s*,\\s*([RC]?\\d+)\\s*(;.*)?/;\r\nlet regex_comment = /\\s*(;.*)?/;\r\n\r\nexport function Compile(source_code) {\r\n    let lines = source_code.split(\"\\n\");\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n        let line = lines[i];\r\n        let result;\r\n        if ((result = regex_line.exec(line)) !== null) {\r\n\r\n        } else if ((result = regex_comment.exec(line)) !== null) {\r\n\r\n        } else {\r\n            throw new Error(\"Compile error: \" + line);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Core/Compiler.js"],"sourceRoot":""}